<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigClaw AI - Trading Dashboard</title>
    <meta name="description" content="AI-powered investment research dashboard with model portfolios, market analysis, and real-time sentiment tracking.">
    <meta property="og:title" content="BigClaw AI - Trading Dashboard">
    <meta property="og:description" content="AI-powered investment research dashboard with model portfolios, market analysis, and real-time sentiment.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bigclaw.grandpapa.net">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BigClaw AI - Trading Dashboard">
    <meta name="twitter:description" content="AI-powered investment research dashboard">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶Ä</text></svg>">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-card: #161b28;
            --bg-card-hover: #1c2333;
            --bg-elevated: #1e2536;
            --border-color: #1e2a3a;
            --border-subtle: #151d2b;
            --text-primary: #e8edf5;
            --text-secondary: #8b95a8;
            --text-muted: #505a6e;
            --gain: #00c48c;
            --gain-bg: rgba(0, 196, 140, 0.08);
            --gain-border: rgba(0, 196, 140, 0.2);
            --loss: #ff4757;
            --loss-bg: rgba(255, 71, 87, 0.08);
            --loss-border: rgba(255, 71, 87, 0.2);
            --gold: #f0b90b;
            --gold-dim: #c49a09;
            --accent: #3b82f6;
            --accent-dim: #2563eb;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* ‚îÄ‚îÄ Top Bar ‚îÄ‚îÄ */
        .topbar {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 200;
        }

        .topbar-inner {
            max-width: 1440px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            height: 48px;
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1rem;
            letter-spacing: -0.01em;
        }

        .brand-icon { font-size: 1.25rem; }

        .brand-name {
            background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .brand-tag {
            font-size: 0.6rem;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            border: 1px solid var(--border-color);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            margin-left: 0.25rem;
        }

        .nav-links {
            display: flex;
            gap: 0;
            height: 48px;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            padding: 0 0.85rem;
            display: flex;
            align-items: center;
            height: 100%;
            border-bottom: 2px solid transparent;
            transition: all 0.15s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
            border-bottom-color: var(--gold);
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ticker-search {
            display: flex;
            align-items: center;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            transition: border-color 0.15s;
        }

        .ticker-search:focus-within {
            border-color: var(--gold);
        }

        .ticker-search input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 0.8rem;
            font-family: inherit;
            padding: 0.4rem 0.65rem;
            width: 90px;
            outline: none;
        }

        .ticker-search input::placeholder { color: var(--text-muted); }

        .ticker-search button {
            background: var(--gold);
            color: var(--bg-primary);
            border: none;
            padding: 0.4rem 0.7rem;
            font-size: 0.75rem;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: background 0.15s;
        }

        .ticker-search button:hover { background: #d4a00a; }

        /* ‚îÄ‚îÄ Market Bar ‚îÄ‚îÄ */
        .market-bar {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 0.5rem 1.5rem;
        }

        .market-bar-inner {
            max-width: 1440px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            flex-wrap: wrap;
        }

        .market-status-pill {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 7px; height: 7px;
            border-radius: 50%;
            background: var(--text-muted);
        }

        .status-dot.open {
            background: var(--gain);
            box-shadow: 0 0 6px var(--gain);
            animation: pulse 2s infinite;
        }

        .status-dot.closed { background: var(--loss); }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .market-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.78rem;
        }

        .market-label {
            color: var(--text-muted);
            font-weight: 500;
        }

        .market-val {
            font-weight: 600;
        }

        .market-val.gain { color: var(--gain); }
        .market-val.loss { color: var(--loss); }

        .market-sep {
            width: 1px;
            height: 16px;
            background: var(--border-color);
        }

        .refresh-pill {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.72rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            border: 1px solid transparent;
            transition: all 0.15s;
            margin-left: auto;
        }

        .refresh-pill:hover {
            border-color: var(--border-color);
            color: var(--text-secondary);
        }

        .refresh-pill .ri {
            display: inline-block;
            font-size: 0.85rem;
            transition: transform 0.3s;
        }

        .refresh-pill .ri.loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ‚îÄ‚îÄ Main Layout ‚îÄ‚îÄ */
        .page-layout {
            max-width: 1440px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 0;
            min-height: calc(100vh - 100px);
        }

        .main-content {
            padding: 1.5rem;
            min-width: 0;
        }

        .news-sidebar {
            border-left: 1px solid var(--border-color);
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
        }

        @media (max-width: 1100px) {
            .page-layout {
                grid-template-columns: 1fr;
            }
            .news-sidebar {
                border-left: none;
                border-top: 1px solid var(--border-color);
            }
        }

        @media (max-width: 768px) {
            .topbar-inner { padding: 0 1rem; }
            .nav-links { display: none; }
            .market-bar { padding: 0.5rem 1rem; }
            .main-content { padding: 1rem; }
            .brand-tag { display: none; }
        }

        /* ‚îÄ‚îÄ Section Titles ‚îÄ‚îÄ */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.65rem;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .section-subtitle {
            font-size: 0.72rem;
            color: var(--text-muted);
        }

        /* ‚îÄ‚îÄ Quote Widget ‚îÄ‚îÄ */
        .quote-widget-container {
            display: none;
            margin-bottom: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            animation: slideDown 0.2s ease;
        }

        .quote-widget-container.visible { display: block; }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quote-widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem 1rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-elevated);
        }

        .quote-widget-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--gold);
        }

        .quote-widget-close {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.15rem;
            transition: color 0.15s;
        }

        .quote-widget-close:hover { color: var(--text-primary); }

        .quote-widget-body { height: 400px; }

        /* ‚îÄ‚îÄ Sentiment Chips ‚îÄ‚îÄ */
        .sentiment-strip {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.35rem;
            margin-bottom: 1.5rem;
            scrollbar-width: none;
        }

        .sentiment-strip::-webkit-scrollbar { display: none; }

        .sent-chip {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.35rem 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            white-space: nowrap;
            font-size: 0.78rem;
            flex-shrink: 0;
        }

        .sent-ticker { font-weight: 600; color: var(--text-primary); }
        .sent-val.bullish { color: var(--gain); font-weight: 600; }
        .sent-val.bearish { color: var(--loss); font-weight: 600; }
        .sent-val.neutral { color: var(--gold); font-weight: 600; }

        /* ‚îÄ‚îÄ Portfolio Cards ‚îÄ‚îÄ */
        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.75rem;
        }

        @media (max-width: 1100px) {
            .portfolio-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 640px) {
            .portfolio-grid { grid-template-columns: 1fr; }
        }

        .pf-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
            transition: all 0.2s;
        }

        .pf-card:hover {
            border-color: #2a3548;
            background: var(--bg-card-hover);
        }

        .pf-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.85rem;
        }

        .pf-name {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .pf-style {
            font-size: 0.72rem;
            color: var(--text-muted);
            margin-top: 0.2rem;
        }

        .pf-style a {
            color: var(--text-muted);
            text-decoration: none;
            border-bottom: 1px dotted var(--text-muted);
        }

        .pf-style a:hover { color: var(--gold); border-color: var(--gold); }

        .pf-return {
            font-size: 0.9rem;
            font-weight: 700;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            letter-spacing: -0.01em;
        }

        .pf-return.gain { color: var(--gain); background: var(--gain-bg); border: 1px solid var(--gain-border); }
        .pf-return.loss { color: var(--loss); background: var(--loss-bg); border: 1px solid var(--loss-border); }

        .pf-value {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 0.15rem;
        }

        .pf-basis {
            font-size: 0.72rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .pf-holdings {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.35rem;
        }

        .pf-holding {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 0.6rem;
            background: var(--bg-primary);
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .pf-h-ticker { font-weight: 600; color: var(--gold); }
        .pf-h-shares { color: var(--text-muted); }

        .pf-more {
            grid-column: span 2;
            text-align: center;
            padding: 0.35rem;
            color: var(--text-muted);
            font-size: 0.72rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.15s;
        }

        .pf-more:hover { background: var(--bg-primary); color: var(--text-secondary); }

        .pf-hidden { display: none; }
        .pf-expanded .pf-hidden { display: flex; }
        .pf-expanded .pf-more { display: none; }

        /* ‚îÄ‚îÄ Analysis Cards ‚îÄ‚îÄ */
        .analysis-block {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .analysis-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.85rem 1.25rem;
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .analysis-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .analysis-nfa {
            font-size: 0.65rem;
            font-weight: 400;
            color: var(--text-muted);
        }

        .analysis-date {
            font-size: 0.72rem;
            color: var(--text-muted);
        }

        .analysis-toggle {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.3rem 0.65rem;
            border-radius: 4px;
            font-size: 0.72rem;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.15s;
        }

        .analysis-toggle:hover { border-color: var(--gold); color: var(--gold); }

        .analysis-body {
            padding: 1.25rem;
            font-size: 0.84rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 500px;
            overflow-y: auto;
        }

        .analysis-body strong, .analysis-body b { color: var(--text-primary); }

        .analysis-collapsed .analysis-body {
            max-height: 100px;
            overflow: hidden;
            position: relative;
        }

        .analysis-collapsed .analysis-body::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 60px;
            background: linear-gradient(transparent, var(--bg-card));
        }

        /* ‚îÄ‚îÄ Two Column Row ‚îÄ‚îÄ */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 768px) {
            .two-col { grid-template-columns: 1fr; }
        }

        .panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .panel-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-color);
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .panel-body { padding: 0; }

        /* ‚îÄ‚îÄ News List ‚îÄ‚îÄ */
        .news-list {
            display: flex;
            flex-direction: column;
            max-height: 340px;
            overflow-y: auto;
        }

        .news-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.1s;
            border-bottom: 1px solid var(--border-subtle);
        }

        .news-item:last-child { border-bottom: none; }
        .news-item:hover { background: var(--bg-card-hover); }

        .news-title {
            font-size: 0.82rem;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 0.2rem;
        }

        .news-title a { color: inherit; text-decoration: none; }
        .news-title a:hover { color: var(--accent); }

        .news-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .news-summary {
            display: none;
            font-size: 0.78rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--border-color);
            line-height: 1.5;
        }

        .news-item.expanded .news-summary { display: block; }

        /* ‚îÄ‚îÄ Chart ‚îÄ‚îÄ */
        .chart-container {
            height: 340px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-primary);
            overflow: hidden;
        }

        .chart-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .card-link {
            display: block;
            text-decoration: none;
            color: inherit;
            transition: all 0.15s;
        }

        .card-link:hover { border-color: #2a3548; }

        .click-hint {
            font-size: 0.68rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        .card-link:hover .click-hint { color: var(--gold); }

        /* ‚îÄ‚îÄ TradingView Ticker Tape ‚îÄ‚îÄ */
        .tv-ticker {
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        /* ‚îÄ‚îÄ News Sidebar ‚îÄ‚îÄ */
        .sidebar-head {
            padding: 0.85rem 1.25rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-head .live-dot {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: var(--loss);
            animation: pulse 1.5s infinite;
        }

        .tv-timeline-widget {
            flex: 1;
            min-height: 400px;
        }

        .sidebar-links-section {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-color);
        }

        .sidebar-section-title {
            font-size: 0.68rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 0.6rem;
        }

        .sidebar-link-list {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .sb-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.78rem;
            font-weight: 500;
            border-radius: 4px;
            transition: all 0.15s;
        }

        .sb-link:hover { background: var(--bg-card); color: var(--text-primary); }

        .sb-link-icon {
            width: 18px; height: 18px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            font-weight: 700;
            flex-shrink: 0;
            color: #fff;
        }

        .sb-link-icon.y { background: #5f0a87; }
        .sb-link-icon.b { background: #1a1a2e; }
        .sb-link-icon.n { background: #e31837; }
        .sb-link-icon.a { background: #0f4c75; }
        .sb-link-icon.x { background: #000; font-size: 0.8rem; }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .site-footer {
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
            padding: 1.5rem;
        }

        .footer-inner {
            max-width: 1440px;
            margin: 0 auto;
        }

        .footer-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .footer-brand {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .footer-links {
            display: flex;
            gap: 1.25rem;
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.78rem;
            transition: color 0.15s;
        }

        .footer-links a:hover { color: var(--gold); }

        .footer-disclaimer {
            font-size: 0.7rem;
            color: var(--text-muted);
            line-height: 1.6;
            max-width: 900px;
        }

        /* ‚îÄ‚îÄ Utilities ‚îÄ‚îÄ */
        .loading {
            color: var(--text-muted);
            text-align: center;
            padding: 2rem;
            font-size: 0.85rem;
        }

        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
    </style>
</head>
<body>

<!-- Top Navigation -->
<nav class="topbar">
    <div class="topbar-inner">
        <div class="topbar-left">
            <a href="#" class="brand">
                <span class="brand-icon">ü¶Ä</span>
                <span class="brand-name">BigClaw AI</span>
                <span class="brand-tag">Research</span>
            </a>
            <div class="nav-links">
                <a href="#portfolios">Portfolios</a>
                <a href="#analysis">Analysis</a>
                <a href="#sentiment">Sentiment</a>
                <a href="#market-data">Market</a>
            </div>
        </div>
        <div class="topbar-right">
            <div class="ticker-search">
                <input type="text" id="ticker-input" placeholder="Symbol..." maxlength="10">
                <button id="ticker-search-btn">Quote</button>
            </div>
        </div>
    </div>
</nav>

<!-- Market Bar -->
<div class="market-bar">
    <div class="market-bar-inner">
        <div class="market-status-pill">
            <span class="status-dot" id="marketDot"></span>
            <span id="marketStatus">--</span>
        </div>
        <div class="market-sep"></div>
        <div class="market-item">
            <span class="market-label">S&P 500</span>
            <span class="market-val" id="spyChange">--</span>
        </div>
        <div class="market-item">
            <span class="market-label">Dow</span>
            <span class="market-val" id="djiChange">--</span>
        </div>
        <div class="market-item">
            <span class="market-label">Nasdaq</span>
            <span class="market-val" id="nasdaqChange">--</span>
        </div>
        <div class="market-sep"></div>
        <div class="refresh-pill" id="refreshBtn" title="Refresh data">
            <span class="ri">‚Üª</span>
            <span id="lastUpdate">Loading...</span>
        </div>
    </div>
</div>

<!-- Main Layout -->
<div class="page-layout">
    <div class="main-content">

        <!-- Quote Widget -->
        <div class="quote-widget-container" id="quote-widget">
            <div class="quote-widget-header">
                <span class="quote-widget-title" id="quote-ticker">AAPL</span>
                <button class="quote-widget-close" id="quote-close" title="Close">&times;</button>
            </div>
            <div class="quote-widget-body" id="quote-body"></div>
        </div>

        <!-- Sentiment Strip -->
        <section id="sentiment">
            <div class="section-header">
                <span class="section-title">ùïè Sentiment</span>
            </div>
            <div class="sentiment-strip" id="sentiment-row"></div>
        </section>

        <!-- Portfolio Cards -->
        <section id="portfolios">
            <div class="section-header">
                <span class="section-title">Model Portfolios</span>
            </div>
            <div class="portfolio-grid" id="portfolio-grid">
                <div class="loading">Loading portfolios...</div>
            </div>
        </section>

        <!-- Analysis Reports -->
        <section id="analysis">
            <!-- BigClaw Market Analysis -->
            <div class="analysis-block analysis-collapsed" id="analysis-card">
                <div class="analysis-head">
                    <div>
                        <div class="analysis-label">ü¶Ä BigClaw Market Analysis <span class="analysis-nfa">(not financial advice)</span></div>
                        <div class="analysis-date" id="analysis-meta">Loading...</div>
                    </div>
                    <button class="analysis-toggle" id="analysis-toggle">Expand</button>
                </div>
                <div class="analysis-body" id="analysis-content">Loading analysis report...</div>
            </div>

            <!-- Market Sentiment Report -->
            <div class="analysis-block" id="sentiment-report-card">
                <div class="analysis-head">
                    <div>
                        <div class="analysis-label">üìä Market Sentiment Report</div>
                        <div class="analysis-date" id="sentiment-report-meta">Loading...</div>
                    </div>
                    <button class="analysis-toggle" id="sentiment-report-toggle">Collapse</button>
                </div>
                <div class="analysis-body" id="sentiment-report-content" style="max-height: 500px;">Loading market sentiment report...</div>
            </div>
        </section>

        <!-- News + Chart -->
        <section id="market-data">
            <div class="two-col">
                <div class="panel" id="news">
                    <div class="panel-head">üì∞ Financial News</div>
                    <div class="panel-body">
                        <div class="news-list" id="news-articles">
                            <div class="loading">Loading news...</div>
                        </div>
                    </div>
                </div>
                <a href="chart-detail.html" class="panel card-link">
                    <div class="panel-head">üìà Portfolio Performance <span class="click-hint">Click for details ‚Üí</span></div>
                    <div class="panel-body">
                        <div class="chart-container" id="performance-chart">
                            <div class="loading">Loading chart...</div>
                        </div>
                    </div>
                </a>
            </div>
        </section>

        <!-- TradingView Ticker Tape -->
        <div class="tv-ticker">
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                {
                    "symbols": [
                        {"proName": "FOREXCOM:SPXUSD", "title": "S&P 500"},
                        {"proName": "FOREXCOM:NSXUSD", "title": "Nasdaq"},
                        {"proName": "NASDAQ:AAPL", "title": "AAPL"},
                        {"proName": "NASDAQ:NVDA", "title": "NVDA"},
                        {"proName": "NASDAQ:TSLA", "title": "TSLA"},
                        {"proName": "NASDAQ:MSFT", "title": "MSFT"},
                        {"proName": "NYSE:JPM", "title": "JPM"},
                        {"proName": "NYSE:BAC", "title": "BAC"}
                    ],
                    "showSymbolLogo": true,
                    "isTransparent": true,
                    "displayMode": "adaptive",
                    "colorTheme": "dark",
                    "locale": "en"
                }
                </script>
            </div>
        </div>
    </div>

    <!-- News Sidebar -->
    <aside class="news-sidebar">
        <div class="sidebar-head">
            <span class="live-dot"></span>
            Market News
        </div>
        <!-- TradingView Timeline Widget -->
        <div class="tv-timeline-widget">
            <div class="tradingview-widget-container" style="height:100%;width:100%">
                <div class="tradingview-widget-container__widget" style="height:100%;width:100%"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
                {
                    "feedMode": "all_symbols",
                    "isTransparent": true,
                    "displayMode": "regular",
                    "width": "100%",
                    "height": "100%",
                    "colorTheme": "dark",
                    "locale": "en"
                }
                </script>
            </div>
        </div>

        <!-- Quick Links -->
        <div class="sidebar-links-section">
            <div class="sidebar-section-title">Live Streams</div>
            <div class="sidebar-link-list">
                <a href="https://www.youtube.com/@YahooFinance/streams" target="_blank" class="sb-link">
                    <span class="sb-link-icon y">Y</span> Yahoo Finance
                </a>
                <a href="https://www.youtube.com/@business/streams" target="_blank" class="sb-link">
                    <span class="sb-link-icon b">B</span> Bloomberg
                </a>
                <a href="https://www.youtube.com/@NBCNews/streams" target="_blank" class="sb-link">
                    <span class="sb-link-icon n">N</span> NBC News
                </a>
                <a href="https://www.youtube.com/@allin/streams" target="_blank" class="sb-link">
                    <span class="sb-link-icon a">A</span> All-In Pod
                </a>
            </div>
        </div>
        <div class="sidebar-links-section" style="padding-top:0">
            <div class="sidebar-section-title">ùïè Feeds</div>
            <div class="sidebar-link-list">
                <a href="https://twitter.com/unusual_whales" target="_blank" class="sb-link">
                    <span class="sb-link-icon x">ùïè</span> Unusual Whales
                </a>
                <a href="https://twitter.com/rebellionaire" target="_blank" class="sb-link">
                    <span class="sb-link-icon x">ùïè</span> Rebellionaire
                </a>
            </div>
        </div>
    </aside>
</div>

<!-- Footer -->
<footer class="site-footer">
    <div class="footer-inner">
        <div class="footer-top">
            <span class="footer-brand">ü¶Ä BigClaw AI</span>
            <div class="footer-links">
                <a href="https://github.com/cbiggs1-tech/bigclaw-ai">GitHub</a>
                <a href="styles.html">Investment Styles</a>
                <a href="chart-detail.html">Performance</a>
            </div>
        </div>
        <div class="footer-disclaimer">
            <strong>Disclaimer:</strong> BigClaw AI is for educational and research purposes only. Nothing on this site constitutes financial advice, a solicitation, or a recommendation to buy or sell any securities. All model portfolios are hypothetical and do not represent real trading accounts. Past performance does not guarantee future results. Data is refreshed at approximately 9:00 AM and 4:30 PM ET on market days. Powered by Claude AI. Always do your own research and consult a qualified financial advisor before making investment decisions.
        </div>
    </div>
</footer>

<script>
    // ‚îÄ‚îÄ Dashboard JavaScript ‚îÄ‚îÄ
    let lastRefreshTime = 0;
    const REFRESH_COOLDOWN = 60000;

    document.addEventListener('DOMContentLoaded', function() {
        loadPortfolioData();
        loadNewsData();
        loadSentimentData();
        loadPerformanceChart();
        loadMarketData();
        loadAnalysisReport();
        loadSentimentReport();
        updateTimestamp();
        updateMarketStatus();
        setupTickerSearch();
        setupRefreshButton();
        setupAnalysisToggle();
        setupSentimentReportToggle();
        setInterval(updateMarketStatus, 60000);
    });

    function setupRefreshButton() {
        const refreshBtn = document.getElementById('refreshBtn');
        const refreshIcon = refreshBtn.querySelector('.ri');

        refreshBtn.addEventListener('click', function() {
            const now = Date.now();
            if (now - lastRefreshTime < REFRESH_COOLDOWN) return;
            if (refreshBtn.classList.contains('refreshing')) return;

            lastRefreshTime = now;
            const startTime = now;
            const MIN_LOADING_TIME = 2000;
            refreshBtn.classList.add('refreshing');
            refreshIcon.textContent = 'üïê';
            refreshIcon.classList.add('loading');

            const cacheBuster = '?t=' + now;

            function finishRefresh(success) {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, MIN_LOADING_TIME - elapsed);
                setTimeout(() => {
                    if (success) {
                        const chartContainer = document.getElementById('performance-chart');
                        chartContainer.innerHTML = `<img src="data/performance_chart.png${cacheBuster}" alt="Portfolio Performance">`;
                        const refreshTime = new Date();
                        const timeStr = refreshTime.toLocaleString('en-US', {
                            month: 'long', day: 'numeric', year: 'numeric',
                            hour: 'numeric', minute: '2-digit', hour12: true, timeZoneName: 'short'
                        });
                        document.getElementById('lastUpdate').textContent = timeStr;
                    }
                    refreshIcon.textContent = '‚Üª';
                    refreshIcon.classList.remove('loading');
                    refreshBtn.classList.remove('refreshing');
                }, remaining);
            }

            Promise.all([
                fetch('data/portfolios.json' + cacheBuster).then(r => r.json()).then(loadPortfolioDataFromJson),
                fetch('data/news.json' + cacheBuster).then(r => r.json()).then(loadNewsDataFromJson),
                fetch('data/sentiment.json' + cacheBuster).then(r => r.json()).then(loadSentimentDataFromJson),
                fetch('data/market.json' + cacheBuster).then(r => r.json()).then(loadMarketDataFromJson),
                fetch('data/portfolio_analysis.json' + cacheBuster).then(r => r.json()).then(loadAnalysisDataFromJson).catch(() => {}),
                fetch('data/analysis.json' + cacheBuster).then(r => r.json()).then(loadSentimentReportDataFromJson).catch(() => {}),
                fetch('data/metadata.json' + cacheBuster).then(r => r.json()).then(data => {
                    document.getElementById('lastUpdate').textContent = data.lastUpdate || 'Unknown';
                })
            ]).then(() => finishRefresh(true)).catch(() => finishRefresh(false));
        });
    }

    function updateMarketStatus() {
        const now = new Date();
        const dot = document.getElementById('marketDot');
        const status = document.getElementById('marketStatus');
        const et = new Date(now.toLocaleString('en-US', { timeZone: 'America/New_York' }));
        const day = et.getDay();
        const hours = et.getHours();
        const minutes = et.getMinutes();
        const time = hours * 60 + minutes;
        const marketOpen = 9 * 60 + 30;
        const marketClose = 16 * 60;
        const isWeekday = day >= 1 && day <= 5;
        const isDuringHours = time >= marketOpen && time < marketClose;
        const isOpen = isWeekday && isDuringHours;

        if (isOpen) {
            dot.className = 'status-dot open';
            status.textContent = 'Market Open';
        } else {
            dot.className = 'status-dot closed';
            if (day === 0 || day === 6) status.textContent = 'Opens Mon 9:30a';
            else if (time < marketOpen) status.textContent = 'Opens 9:30a ET';
            else status.textContent = 'Closed';
        }
    }

    function loadMarketDataFromJson(data) {
        if (data.spy) {
            const el = document.getElementById('spyChange');
            const c = data.spy.change;
            el.textContent = (c >= 0 ? '+' : '') + c.toFixed(2) + '%';
            el.className = 'market-val ' + (c >= 0 ? 'gain' : 'loss');
        }
        if (data.dji) {
            const el = document.getElementById('djiChange');
            const c = data.dji.change;
            el.textContent = (c >= 0 ? '+' : '') + c.toFixed(2) + '%';
            el.className = 'market-val ' + (c >= 0 ? 'gain' : 'loss');
        }
        if (data.nasdaq) {
            const el = document.getElementById('nasdaqChange');
            const c = data.nasdaq.change;
            el.textContent = (c >= 0 ? '+' : '') + c.toFixed(2) + '%';
            el.className = 'market-val ' + (c >= 0 ? 'gain' : 'loss');
        }
    }

    function loadMarketData() {
        fetch('data/market.json').then(r => r.json()).then(loadMarketDataFromJson).catch(() => {});
    }

    function setupTickerSearch() {
        const input = document.getElementById('ticker-input');
        const btn = document.getElementById('ticker-search-btn');
        const quoteWidget = document.getElementById('quote-widget');
        const quoteBody = document.getElementById('quote-body');
        const quoteTitle = document.getElementById('quote-ticker');
        const quoteClose = document.getElementById('quote-close');

        function searchTicker() {
            const ticker = input.value.trim().toUpperCase();
            if (!ticker) return;
            quoteTitle.textContent = ticker;
            quoteWidget.classList.add('visible');
            quoteBody.innerHTML = '';

            const wc = document.createElement('div');
            wc.className = 'tradingview-widget-container';
            wc.style.cssText = 'height:100%;width:100%';
            const wi = document.createElement('div');
            wi.className = 'tradingview-widget-container__widget';
            wi.style.cssText = 'height:100%;width:100%';
            wc.appendChild(wi);

            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js';
            script.async = true;
            script.innerHTML = JSON.stringify({
                "symbols": [[ticker, ticker + "|1D"]],
                "chartOnly": false, "width": "100%", "height": "100%",
                "locale": "en", "colorTheme": "dark", "autosize": true,
                "showVolume": false, "showMA": false, "hideDateRanges": false,
                "hideMarketStatus": false, "hideSymbolLogo": false,
                "scalePosition": "right", "scaleMode": "Normal",
                "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                "fontSize": "10", "noTimeScale": false, "valuesTracking": "1",
                "changeMode": "price-and-percent", "chartType": "area",
                "lineWidth": 2, "lineType": 0,
                "dateRanges": ["1d|1", "1m|30", "3m|60", "12m|1D", "60m|1W", "all|1M"]
            });
            wc.appendChild(script);
            quoteBody.appendChild(wc);
            quoteWidget.scrollIntoView({ behavior: 'smooth', block: 'start' });
            input.value = '';
        }

        quoteClose.addEventListener('click', () => { quoteWidget.classList.remove('visible'); quoteBody.innerHTML = ''; });
        btn.addEventListener('click', searchTicker);
        input.addEventListener('keypress', e => { if (e.key === 'Enter') searchTicker(); });
    }

    function updateTimestamp() {
        fetch('data/metadata.json').then(r => r.json()).then(data => {
            document.getElementById('lastUpdate').textContent = data.lastUpdate || 'Unknown';
        }).catch(() => { document.getElementById('lastUpdate').textContent = 'Updating...'; });
    }

    function loadPortfolioDataFromJson(data) {
        const container = document.getElementById('portfolio-grid');
        container.innerHTML = '';

        data.portfolios.forEach((portfolio) => {
            const isGain = portfolio.totalReturn >= 0;
            const returnClass = isGain ? 'gain' : 'loss';
            const returnSign = isGain ? '+' : '';
            let startDate = '';
            if (portfolio.createdAt) {
                const d = new Date(portfolio.createdAt);
                startDate = d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            }
            const styleAnchors = {
                'Deep Value Investing': 'value',
                'Disruptive Innovation': 'innovation',
                'Growth at Reasonable Price': 'garp'
            };
            const styleAnchor = styleAnchors[portfolio.style] || '';
            const holdings = portfolio.holdings || [];
            const visible = holdings.slice(0, 4);
            const hidden = holdings.slice(4);

            let holdingsHtml = visible.map(h => `
                <div class="pf-holding">
                    <span class="pf-h-ticker">${h.ticker}</span>
                    <span class="pf-h-shares">${h.shares}</span>
                </div>
            `).join('');

            if (hidden.length > 0) {
                holdingsHtml += hidden.map(h => `
                    <div class="pf-holding pf-hidden">
                        <span class="pf-h-ticker">${h.ticker}</span>
                        <span class="pf-h-shares">${h.shares}</span>
                    </div>
                `).join('');
                holdingsHtml += `<div class="pf-more" onclick="this.parentElement.classList.toggle('pf-expanded')">+${hidden.length} more</div>`;
            }

            container.innerHTML += `
                <div class="pf-card">
                    <div class="pf-top">
                        <div>
                            <div class="pf-name">${portfolio.name}</div>
                            <div class="pf-style"><a href="styles.html#${styleAnchor}">${portfolio.style}</a> ¬∑ ${startDate}</div>
                        </div>
                        <div class="pf-return ${returnClass}">${returnSign}${portfolio.totalReturn.toFixed(2)}%</div>
                    </div>
                    <div class="pf-value">$${portfolio.totalValue.toLocaleString()}</div>
                    <div class="pf-basis">of $${portfolio.startingCash.toLocaleString()} initial</div>
                    <div class="pf-holdings">${holdingsHtml}</div>
                </div>
            `;
        });
    }

    function loadPortfolioData() {
        fetch('data/portfolios.json').then(r => r.json()).then(loadPortfolioDataFromJson)
            .catch(() => { document.getElementById('portfolio-grid').innerHTML = '<p class="loading">Portfolio data unavailable</p>'; });
    }

    function loadNewsDataFromJson(data) {
        const container = document.getElementById('news-articles');
        container.innerHTML = '';
        const articles = (data.articles || []).slice(0, 5);
        if (articles.length === 0) { container.innerHTML = '<p class="loading">No news available</p>'; return; }

        articles.forEach(article => {
            const pubDate = article.published ? formatDate(article.published) : '';
            container.innerHTML += `
                <div class="news-item" onclick="this.classList.toggle('expanded')">
                    <div class="news-title"><a href="${article.link}" target="_blank" rel="noopener" onclick="event.stopPropagation()">${article.title}</a></div>
                    <div class="news-meta">${article.source}${pubDate ? ' ¬∑ ' + pubDate : ''}</div>
                    ${article.summary ? `<div class="news-summary">${article.summary}</div>` : ''}
                </div>
            `;
        });
    }

    function loadNewsData() {
        fetch('data/news.json').then(r => r.json()).then(loadNewsDataFromJson)
            .catch(() => { document.getElementById('news-articles').innerHTML = '<p class="loading">News unavailable</p>'; });
    }

    function setupAnalysisToggle() {
        const card = document.getElementById('analysis-card');
        const toggle = document.getElementById('analysis-toggle');
        toggle.addEventListener('click', () => {
            card.classList.toggle('analysis-collapsed');
            toggle.textContent = card.classList.contains('analysis-collapsed') ? 'Expand' : 'Collapse';
        });
    }

    function setupSentimentReportToggle() {
        const content = document.getElementById('sentiment-report-content');
        const toggle = document.getElementById('sentiment-report-toggle');
        let isCollapsed = false;
        toggle.addEventListener('click', () => {
            isCollapsed = !isCollapsed;
            content.style.maxHeight = isCollapsed ? '100px' : '500px';
            content.style.overflow = isCollapsed ? 'hidden' : 'auto';
            toggle.textContent = isCollapsed ? 'Expand' : 'Collapse';
        });
    }

    function loadSentimentReportDataFromJson(data) {
        const content = document.getElementById('sentiment-report-content');
        const meta = document.getElementById('sentiment-report-meta');
        if (!data || !data.content) {
            content.textContent = 'No market sentiment report available yet. Reports are published at 9 AM ET.';
            meta.textContent = 'Awaiting report...';
            return;
        }
        let formatted = data.content
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/`([^`]+)`/g, '<code style="background:var(--bg-elevated);padding:0.1rem 0.3rem;border-radius:3px;color:var(--gold);">$1</code>')
            .replace(/^## (.*$)/gm, '<h3 style="color:var(--text-primary);margin:1rem 0 0.5rem;font-size:1rem;">$1</h3>')
            .replace(/^# (.*$)/gm, '<h2 style="color:var(--gold);margin:1rem 0 0.5rem;font-size:1.1rem;">$1</h2>')
            .replace(/^‚Ä¢ /gm, '‚Ä¢ ')
            .replace(/\n/g, '<br>');
        content.innerHTML = formatted;
        meta.textContent = `${data.reportType || 'Market Sentiment'} ¬∑ ${data.timestamp || 'Recent'}`;
    }

    function loadSentimentReport() {
        fetch('data/analysis.json').then(r => r.json()).then(loadSentimentReportDataFromJson)
            .catch(() => {
                document.getElementById('sentiment-report-content').textContent = 'Market sentiment report not available.';
                document.getElementById('sentiment-report-meta').textContent = 'Reports published at 9 AM ET';
            });
    }

    function loadAnalysisDataFromJson(data) {
        const content = document.getElementById('analysis-content');
        const meta = document.getElementById('analysis-meta');
        if (!data || !data.content) {
            content.textContent = 'No analysis available yet. Reports are published at 9 AM and 4:30 PM ET.';
            meta.textContent = 'Awaiting report...';
            return;
        }
        let formatted = data.content
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\n/g, '<br>');
        content.innerHTML = formatted;
        meta.textContent = `${data.reportType} ¬∑ ${data.portfolioName} ¬∑ ${data.timestamp}`;
    }

    function loadAnalysisReport() {
        fetch('data/portfolio_analysis.json').then(r => r.json()).then(loadAnalysisDataFromJson)
            .catch(() => {
                document.getElementById('analysis-content').textContent = 'Portfolio analysis not available yet.';
                document.getElementById('analysis-meta').textContent = 'Reports published at 4:30 PM ET';
            });
    }

    function loadSentimentDataFromJson(data) {
        const container = document.getElementById('sentiment-row');
        container.innerHTML = '';
        const tickers = data.tickers || [];
        if (tickers.length === 0) {
            container.innerHTML = '<div class="sent-chip"><span class="sent-ticker">Sentiment</span><span class="sent-val neutral">No data</span></div>';
            return;
        }
        tickers.forEach(item => {
            let cls = 'neutral';
            if (item.bullishPercent >= 60) cls = 'bullish';
            else if (item.bullishPercent <= 40) cls = 'bearish';
            container.innerHTML += `<div class="sent-chip"><span class="sent-ticker">${item.ticker}</span><span class="sent-val ${cls}">${item.bullishPercent}%</span></div>`;
        });
    }

    function loadSentimentData() {
        fetch('data/sentiment.json').then(r => r.json()).then(loadSentimentDataFromJson).catch(() => {});
    }

    function loadPerformanceChart() {
        const container = document.getElementById('performance-chart');
        const img = new Image();
        img.onload = () => { container.innerHTML = `<img src="data/performance_chart.png" alt="Portfolio Performance">`; };
        img.onerror = () => { container.innerHTML = '<p class="loading">Chart generating...</p>'; };
        img.src = 'data/performance_chart.png';
    }

    function formatDate(dateStr) {
        try {
            const date = new Date(dateStr);
            if (isNaN(date.getTime())) return '';
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        } catch { return ''; }
    }

    function shouldRefresh() {
        const now = new Date();
        return now.getDay() >= 1 && now.getDay() <= 5 && now.getHours() >= 9 && now.getHours() < 17;
    }

    if (shouldRefresh()) {
        setInterval(() => { loadPortfolioData(); loadNewsData(); updateTimestamp(); }, 5 * 60 * 1000);
    }
</script>
</body>
</html>
